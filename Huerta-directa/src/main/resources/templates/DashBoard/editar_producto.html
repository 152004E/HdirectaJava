<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Producto - Huerta Directa</title>
    <link rel="icon" type="image/png" href="/images/logo_huerta.png"/>
    <link rel="stylesheet" href="/CSS/StyleDashBoardd.css"/>
    <link rel="stylesheet" href="/CSS/editar_producto.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Editar Producto - Huerta Directa</title>
    <link rel="icon" type="image/png" href="/images/logo_huerta.png"/>
    <link rel="stylesheet" href="/CSS/StyleDashBoardd.css"/>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
    <div class="editar-container">
        <h1><i class="fas fa-edit"></i> EDITAR PRODUCTO</h1>

            <!-- Mensajes de éxito o error -->
            <div th:if="${success}" class="alert alert-success alert-dismissible fade show" role="alert">
                <i class="fas fa-check-circle"></i> <span th:text="${success}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>
            
            <div th:if="${error}" class="alert alert-danger alert-dismissible fade show" role="alert">
                <i class="fas fa-exclamation-circle"></i> <span th:text="${error}"></span>
                <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
            </div>

            <!-- Formulario de edición -->
            <form th:action="@{/actualizar_producto/{id}(id=${producto.idProduct})}" 
                  method="post" 
                  th:object="${producto}">
                
                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="nameProduct" class="form-label">Nombre del Producto</label>
                        <input type="text" class="form-control" id="nameProduct" 
                               th:field="*{nameProduct}" required>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label for="price" class="form-label">Precio (COP)</label>
                        <input type="number" step="0.01" class="form-control" id="price" 
                               th:field="*{price}" required>
                    </div>
                </div>

                <div class="row">
                    <div class="col-md-6 mb-3">
                        <label for="category" class="form-label">Categoría</label>
                        <select class="form-select" id="category" th:field="*{category}" required>
                            <option value="">Seleccione una categoría</option>
                            <option value="frutas">Frutas</option>
                            <option value="verduras-hortalizas">Verduras y Hortalizas</option>
                            <option value="lacteos">Lácteos</option>
                            <option value="carnes-proteinas">Carnes y Proteínas</option>
                            <option value="cereales-granos">Cereales y Granos</option>
                            <option value="legumbres-secas">Legumbres Secas</option>
                            <option value="productos-organicos">Productos Orgánicos</option>
                            <option value="hierbas-especias">Hierbas y Especias</option>
                            <option value="miel-derivados">Miel y Derivados</option>
                            <option value="procesados-artesanales">Procesados Artesanales</option>
                            <option value="bebidas-naturales">Bebidas Naturales</option>
                            <option value="plantas-semillas">Plantas y Semillas</option>
                            <option value="cajas-combos">Cajas Mixtas o Combos</option>
                        </select>
                    </div>

                    <div class="col-md-6 mb-3">
                        <label for="unit" class="form-label">Unidad de Medida</label>
                        <select class="form-select" id="unit" th:field="*{unit}" required>
                            <option value="">Seleccione una medida</option>
                            <option value="kg">Kilogramos (kg)</option>
                            <option value="g">Gramos (g)</option>
                            <option value="lb">Libras (lb)</option>
                            <option value="unidad">Unidad (u)</option>
                            <option value="litro">Litros (L)</option>
                            <option value="ml">Mililitros (ml)</option>
                            <option value="docena">Docena</option>
                            <option value="paq">Paquete</option>
                            <option value="caja">Caja</option>
                            <option value="otro">Otro</option>
                        </select>
                    </div>
                </div>

                <div class="mb-3">
                    <label for="descriptionProduct" class="form-label">Descripción</label>
                    <textarea class="form-control" id="descriptionProduct" rows="4" 
                              th:field="*{descriptionProduct}" required></textarea>
                </div>

                <div class="mb-3">
                    <label for="imageProduct" class="form-label">Nombre de la Imagen</label>
                    <input type="text" class="form-control" id="imageProduct" 
                           th:field="*{imageProduct}" 
                           placeholder="Ej: producto.jpg"
                           readonly>
                    <small class="text-muted">
                        <i class="fas fa-info-circle"></i> 
                        La imagen actual se mantiene. Para cambiarla, contacte al administrador.
                    </small>
                </div>

                <!-- Campos ocultos -->
                <input type="hidden" th:field="*{idProduct}">
                <input type="hidden" th:field="*{publicationDate}">
                <input type="hidden" th:field="*{userId}">

                <!-- Botones de acción -->
                <div class="d-flex justify-content-between mt-4">
                    <a href="/Dashboardd" class="btn btn-secondary">
                        <i class="fas fa-arrow-left"></i> Cancelar
                    </a>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-save"></i> Guardar Cambios
                    </button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Auto-ocultar alertas después de 5 segundos
        setTimeout(() => {
            const alerts = document.querySelectorAll('.alert');
            alerts.forEach(alert => {
                alert.style.transition = 'opacity 0.5s';
                alert.style.opacity = '0';
                setTimeout(() => alert.remove(), 500);
            });
        }, 5000);
    </script>
</body>
</html>