<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Agrega tu producto || Huerta Directa</title>
    <link rel="icon" type="image/png" href="/images/logo_huerta.png" />

    <!-- Fuentes -->
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <!-- Iconos de Google (Material Symbols) -->
<link
  href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined"
  rel="stylesheet"
/>

    <!-- Tailwind CSS -->
    <link href="/CSS/output.css" rel="stylesheet" />
  </head>

  <body class="min-h-screen flex flex-col font-[Poppins] bg-[#f7efd8] text-[#333]">
    <!-- Nav -->
    <div th:replace="fragments/navPagina :: navPagina"></div>

    <!-- Contenedor principal -->
    <div th:replace="fragments/producto/AgregarProducto :: AgregarProducto"></div>



    <div th:replace="fragments/footer :: footer"></div>

    <script>
      const inputImagen = document.getElementById("imagen");
      const fileNameSpan = document.getElementById("file-name");

      inputImagen.addEventListener("change", function () {
        fileNameSpan.textContent =
          inputImagen.files.length > 0
            ? inputImagen.files[0].name
            : "Ningún archivo seleccionado";
      });

      const btnVisualizar = document.getElementById("btn-visualizar");
      const modal = document.getElementById("modalVistaPrevia");
      const cerrarBtn = document.getElementById("cerrarModal");

      const nombre = document.querySelector('[name="nombre"]');
      const precio = document.querySelector('[name="precio"]');
      const categoria = document.querySelector('[name="categoria-producto"]');
      const descripcion = document.querySelector('[name="descripcion"]');
      const imagen = document.querySelector('[name="image_product"]');
      const unidad = document.querySelector('[name="unidad"]');

      const prevNombre = document.getElementById("prev-nombre");
      const prevPrecio = document.getElementById("prev-precio");
      const prevCategoria = document.getElementById("prev-categoria");
      const prevDescripcion = document.getElementById("prev-descripcion");
      const prevImagen = document.getElementById("prev-imagen");
      const prevUnidad = document.getElementById("prev-unidad");

      btnVisualizar.addEventListener("click", () => {
        prevNombre.textContent = nombre.value || "Nombre del producto";
        prevPrecio.textContent = precio.value
          ? `Precio: $${precio.value}`
          : "Precio: $0.00";
        prevUnidad.textContent =
          "Medida: " + (unidad.options[unidad.selectedIndex].text || "—");
        prevCategoria.textContent =
          "Categoría: " +
          (categoria.options[categoria.selectedIndex].text || "—");
        prevDescripcion.textContent =
          "Descripción: " + (descripcion.value || "Descripción del producto");

        const file = imagen.files[0];
        if (file) {
          const reader = new FileReader();
          reader.onload = (e) => (prevImagen.src = e.target.result);
          reader.readAsDataURL(file);
        } else {
          prevImagen.src = "../images/ImgenAgregarProducto1.png";
        }

        modal.classList.remove("hidden");
      });

      cerrarBtn.addEventListener("click", () => {
        modal.classList.add("hidden");
      });

      window.addEventListener("click", (e) => {
        if (e.target === modal) modal.classList.add("hidden");
      });
    </script>
  </body>
</html>
